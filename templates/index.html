<!DOCTYPE html>
<html>
<head>
    <title>Chat</title>
</head>
<body>
    <div class="messages"></div>

    <form>
        <input type="text" class="nickname" placeholder="Enter your nickname">
        <input type="text" class="message">
        <input type="submit" value="Send">
    </form>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.js"></script>
    <script type="text/javascript">
        var socket = io.connect("https://port-0-python-chat-1272llwx73p0i.sel5.cloudtype.app/");

        socket.on("connect", function() {
            socket.emit("event", {data:"Connect"});

            var form = $("form").on("submit", function(e){
                e.preventDefault();
                let nickname = $("input.nickname").val();
                let message = $("input.message").val();

                socket.emit("event", {
                    nickname: nickname,
                    message: message
                });
                $("input.message").val("").focus();
            });
        });

        socket.on("response", function(msg){
            $("div.messages").append("<div><b style='color:blue'>" + msg.nickname + "</b>" + msg.message + "</div>");
        });
    </script>
</body>
</html>
